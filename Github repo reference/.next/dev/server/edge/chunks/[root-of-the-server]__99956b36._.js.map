{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/.gemini/antigravity/scratch/christmas_chef_event/src/middleware.ts"],"sourcesContent":["import { createMiddlewareClient } from '@supabase/auth-helpers-nextjs';\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nexport async function middleware(req: NextRequest) {\n    const res = NextResponse.next();\n\n    // Create Supabase client\n    // If credentials are missing, this might fail or create an empty client.\n    // For local dev without env, we wrap in try/catch or skip if auth is strictly required.\n    const supabase = createMiddlewareClient({ req, res });\n\n    // Refresh session if expired\n    const {\n        data: { session },\n    } = await supabase.auth.getSession();\n\n    const isAuthRoute = req.nextUrl.pathname.startsWith('/admin/login');\n    const isAdminRoute = req.nextUrl.pathname.startsWith('/admin');\n\n    // If user is already logged in and tries to access login page, redirect to dashboard\n    if (isAuthRoute && session) {\n        return NextResponse.redirect(new URL('/admin/dashboard', req.url));\n    }\n\n    // If user is NOT logged in and tries to access admin pages, redirect to login\n    if (isAdminRoute && !isAuthRoute && !session) {\n        // For LOCAL TESTING ONLY (Uncomment to bypass auth if needed for UI dev)\n        return res;\n\n        // return NextResponse.redirect(new URL('/admin/login', req.url));\n    }\n\n    return res;\n}\n\nexport const config = {\n    matcher: ['/admin/:path*'],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAGO,eAAe,WAAW,GAAgB;IAC7C,MAAM,MAAM,8PAAY,CAAC,IAAI;IAE7B,yBAAyB;IACzB,yEAAyE;IACzE,wFAAwF;IACxF,MAAM,WAAW,IAAA,kRAAsB,EAAC;QAAE;QAAK;IAAI;IAEnD,6BAA6B;IAC7B,MAAM,EACF,MAAM,EAAE,OAAO,EAAE,EACpB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,MAAM,cAAc,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IACpD,MAAM,eAAe,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAErD,qFAAqF;IACrF,IAAI,eAAe,SAAS;QACxB,OAAO,8PAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,oBAAoB,IAAI,GAAG;IACpE;IAEA,8EAA8E;IAC9E,IAAI,gBAAgB,CAAC,eAAe,CAAC,SAAS;QAC1C,yEAAyE;QACzE,OAAO;IAEP,kEAAkE;IACtE;IAEA,OAAO;AACX;AAEO,MAAM,SAAS;IAClB,SAAS;QAAC;KAAgB;AAC9B"}}]
}